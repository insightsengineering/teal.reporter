---
title: "teal_report Class"
author: "NEST CoreDev"
output:
  rmarkdown::html_vignette:
    toc: true
vignette: >
  %\VignetteIndexEntry{teal_report Class}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Introduction

The `teal_report` class in `teal.reporter` provides a way to create reproducible reports by adding, editing and removing document elements.

The `teal_report` class is built on top of [`teal_data`](https://insightsengineering.github.io/teal.data/latest-tag/articles/teal-data.html), inheriting all its reproducibility and code-tracking capabilities while adding reporting-specific functionality through `teal_card`.

This vignette shows you how to use `teal_report` to enhance your teal modules with reporting capabilities.

## Creating a teal_report

Creating a `teal_report` is straightforward - you can include your data and it automatically tracks the code needed to reproduce your analysis:

```{r basic-usage}
library(teal.reporter)
report <- teal_report()
```

## Adding Computed Results with `eval_code`

Since `teal_report` inherits from `teal_data`, you can use `eval_code()` to add computed results that are automatically tracked for reproducibility:

```{r eval-code-example}
library(teal.code)

report <- eval_code(
  report, 
  "iris_head <- head(iris)",
  keep_output = TRUE
)
```

The code is automatically tracked

```{r get_code}
cat(get_code(report))
```

Also, the last output of `code` is automatically tracked, if you specify `keep_output = TRUE` in `eval_code()`.

## Converting to HTML

The `teal_report` object can be converted to HTML using `toHTML()`.

```{r html}
library(tools)
toHTML(report)
```

This is used in the `Reporter` class to display the report in the `Reporter previewer` module,
but this is also helpful in displaying report object in HTML output Rmarkdown files.

## Adding text content to the report

In most cases it is convenient to add code and the results of its evalutation to the report using `eval_code()`.
For the scenarios where user would like to add commentary and section headers, `teal_card` can be used.

```{r c_cards}
teal_card(report) <- c(teal_card(report), "This analysis looks at the iris dataset.")
```

You can also prepend the content of the report by using `after` parameter in `append` function.

```{r append_cards}
teal_card(report) <- append(teal_card(report), "## My analysis", after = 0)
```

```{r final_toHTML}	
toHTML(report)
```

## Key Benefits

Using `teal_report` in your modules provides several advantages:

1. **Reproducibility**: All code is automatically captured via the underlying `teal_data` infrastructure
2. **Consistency**: Standardized way to create reports across modules  
3. **Flexibility**: Easy to add different types of content to reports
4. **Integration**: Works seamlessly with the teal reporter infrastructure
5. **Code Tracking**: Inherited `eval_code()` functionality ensures all computations are reproducible

## Further Reading

For more details on the underlying `teal_data` functionality, see the [Introduction to teal.data](https://insightsengineering.github.io/teal.data/latest-tag/articles/teal-data.html). 

For more information on the `teal_report` class usage in `teal`, see the [Managing Reproducible Report Documents in teal](https://insightsengineering.github.io/teal/latest-tag/articles/managing-reproducible-report-documents-in-teal.html).
